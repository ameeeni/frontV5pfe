<ion-content class="cpro-content">
  <ion-card>
    <ion-card-content class="card-content">
      <div class="register-title">
        <h1>Ordonner un virement</h1>
      </div>
      <form [formGroup]="virementForm" >
        <ion-item>
          <ion-label position="floating">Ecrire votre IBAN :</ion-label>
          <ion-input type="number" formControlName="ibandeb" [(ngModel)]="virement.IBANDebiteur" >
            <ion-text style="padding: 30px;"></ion-text>
          </ion-input>
          <small *ngIf="virementForm.controls['ibandeb'].errors && virementForm.controls['ibandeb'].touched" class="ion-color-danger">
            Votre IBAN est obligatoire
          </small>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Ecrire l'IBAN de votre bénéficiaire :</ion-label>
          <ion-input type="number" formControlName="ibanrec" [(ngModel)]="virement.IBANRecepteur">
            <ion-text style="padding: 30px;"></ion-text>
          </ion-input>
          <small *ngIf="virementForm.controls['ibanrec'].errors && virementForm.controls['ibanrec'].touched" class="ion-color-danger">
            Votre IBAN est obligatoire
          </small>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Choisir type de Virement</ion-label>
          <ion-select label-placement="floating"
                      placeholder="Choisir votre type de Virement:"
                      [(ngModel)]="virement.type_de_virement"
                      formControlName="type_de_virement"
          >
            <ion-select-option ></ion-select-option>
          </ion-select>
          <small *ngIf="virementForm.controls['type_de_virement'].errors && virementForm.controls['type_de_virement'].touched" class="ion-color-danger">
            Votre IBAN est obligatoire
          </small>
        </ion-item>
        <ion-item (click)="showPicker = ! showPicker">
         <ion-label>Date de virement</ion-label>
          <ion-text slot="end" >
             {{formatedString}}
          </ion-text>
        </ion-item>
        <ion-datetime *ngIf="showPicker"
                      [value]="dateValue" #datetime
                      (ionChange)="dateChanged(datetime.value)"
                      showDefaultButtons="true"
                      (ionCancel)="showPicker=false;"
                      [(ngModel)]="virement.date_de_virement"
                      formControlName="date_de_virement">
        </ion-datetime>
        <small *ngIf="virementForm.controls['date_de_virement'].errors && virementForm.controls['date_de_virement'].touched" class="ion-color-danger">
          Votre IBAN est obligatoire
        </small>
        <ion-item>
          <ion-label position="floating">Montant à Virer</ion-label>
          <ion-input type="number" [(ngModel)]="virement.montant"
          formControlName="montant">
            <ion-text style="padding: 30px;">DNT</ion-text>
            <small *ngIf="virementForm.controls['montant'].errors && virementForm.controls['montant'].touched" class="ion-color-danger">
              Votre IBAN est obligatoire
            </small>
          </ion-input>
        </ion-item>
        <ion-button type="submit" class="cpr-btn" id="open-modal">
          Effectuer le virement
        </ion-button>
      </form>
      <ion-modal trigger="open-modal">
        <ng-template>
          <ion-content>
            <ion-card>
              <ion-card-content>
                <svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg">
                  <g stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                    <path class="circle" d="M13 1C6.372583 1 1 6.372583 1 13s5.372583 12 12 12 12-5.372583 12-12S19.627417 1 13 1z"/>
                    <path class="tick" d="M6.5 13.5L10 17 l8.808621-8.308621"/>
                  </g>
                </svg>
                Votre virement a bien été envoyée en succées vous vous recevez un email de chez La poste
                ultérieurement.
              </ion-card-content>
              <ion-button href="menu/consulterComptes" style="display: block;">Acceuil</ion-button>
            </ion-card>
          </ion-content>
        </ng-template>
      </ion-modal>
    </ion-card-content>
  </ion-card>
</ion-content>

